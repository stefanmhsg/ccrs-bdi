@prefix ccrs: <https://example.org/ccrs#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> . 
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix stigmark: <https://example.org/stigmark#> . 

# ============================================
# Core CCRS Pattern Types
# ============================================

ccrs:SimplePattern a owl:Class ;
    rdfs:label "Simple Pattern" ;
    rdfs:comment "Pattern matching a single RDF triple" . 

ccrs:StructuralPattern a owl:Class ;
    rdfs:label "Structural Pattern" ;
    rdfs:comment "Pattern matching multiple connected RDF triples using SPARQL" .

# ============================================
# Properties
# ============================================

ccrs:patternType a owl:DatatypeProperty ;
    rdfs:label "pattern type" ;
    rdfs:comment "The CCRS type this pattern detects (e.g., 'signifier', 'stigmergy')" .

ccrs:matchesPosition a owl:DatatypeProperty ;
    rdfs:label "matches position" ;
    rdfs:comment "Triple position for simple patterns (subject, predicate, or object)" .

ccrs:priority a owl:DatatypeProperty ;
    rdfs:label "priority" ;
    rdfs:comment "Pattern priority (higher = matched first)" .

ccrs:sparqlPattern a owl:DatatypeProperty ;
    rdfs:label "SPARQL pattern" ;
    rdfs:comment "SPARQL query defining the structural pattern" .

ccrs:extractVariable a owl:DatatypeProperty ;
    rdfs:label "extract variable" ;
    rdfs:comment "SPARQL variable to extract as the subject of the result" .

# ============================================
# Example Simple Pattern:  Signifier
# ============================================

<https://kaefer3000.github.io/2021-02-dagstuhl/vocab#green>
    a ccrs:SimplePattern ;
    ccrs:patternType "signifier" ;
    ccrs:matchesPosition "predicate" ;
    ccrs:priority 10 ;
    rdfs:label "Green Signifier" ;
    rdfs:comment "Visual signifier indicating preferred direction or state" .

# ============================================
# Example Simple Patterns: Stigmergy
# ============================================

stigmark:hasMarker
    a ccrs:SimplePattern ;
    ccrs:patternType "stigmergy" ;
    ccrs:matchesPosition "predicate" ;
    ccrs:priority 5 ;
    rdfs:label "Has Marker Predicate" ;
    rdfs:comment "Predicate linking an entity to its stigmergy marker" .

stigmark:Marker
    a ccrs:SimplePattern ;
    ccrs:patternType "stigmergy" ;
    ccrs:matchesPosition "object" ;
    ccrs:priority 5 ;
    rdfs:label "Marker Type" ;
    rdfs:comment "Type of stigmergy markers" .

# ============================================
# Example Structural Pattern: Stigmergy Marker with Pheromones
# ============================================

:stigmergyMarkerPattern
    a ccrs:StructuralPattern ;
    ccrs:patternType "stigmergy" ;
    ccrs:priority 100 ;
    ccrs:extractVariable "marker" ;
    rdfs:label "Stigmergy Marker with Pheromones" ;
    rdfs:comment "Detects stigmergy markers containing pheromones that refer to targets" ;
    ccrs:sparqlPattern """
        PREFIX stigmark: <https://example.org/stigmark#>
        PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
        
        SELECT ?marker ?target ?value
        WHERE {
            ?marker rdf:type stigmark:Marker ;
                    stigmark:contains ?pheromone .
            ?pheromone stigmark:refersTo ?target ;
                       stigmark:quantitative ?value .
        }
    """ . 